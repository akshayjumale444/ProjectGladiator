<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Musafir Airlines</title>

 <link type="text/css" rel="stylesheet" href="bootstrap.min.css" />
<link type="text/css" rel="stylesheet" href="RegistrationPageStyle.css" />

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
	
	
<script>
$(function(){
	$("#userRegistrationFrm").validate({
		rules: {
			ufname : {
		        required: true,
		        minlength: 3
		      },
		      uemail: {
		        required: true,
		        email: true
		      },
		      ucontact: {
		    	  required: true,
		      },
		      udate: {
		    	  required: true,
		       },
		       upswd: {
		    	   required: true,
		    	   minlength: 6,
		    	   maxlength:14
		    	   }
		       },
		      
		    messages : {
		    	ufname: {
		    	required: "Enter your name!"	,
		        minlength: "Name should be at least 3 characters"
		      },
		      uemail: {
		    	  required: "Enter email!",
		    	  email: "Email must be of form abc@domain.com"
		      },
		      ucontact:{
		    	  required: "Enter Mobile No",
		    	  number: "Enter Mobile No in numeral",
		    	  maxlength:"Mob No must be of 10 digit"
		      },
		      upswd: {
		    	  required: "Password is required!",
		    	  minlength: "Password must be atleast 6 character long!",
		    	  maxlength: "Password can only be 14 characters long!"
		      }    
		}
	});
	
	$("#userRegistrationFrm").submit(function(evt){
		evt.preventDefault();
		var obj={
				fname: $("#ufname").val(),
				lname: $("#ulname").val(),
				emailId: $("#uemail").val(),
				mobno: $("#ucontact").val(),
				password: $("#upswd").val(),
				dateOfBirth: $("#udate").val()
		}
		$.ajax({
			url : 'addUser.lti', 
			method : 'POST', 
			data : JSON.stringify(obj), 
			contentType : 'application/json', 
			success : function(response){ 
				alert(JSON.stringify(response));
				$("#divReg").append("<h4>"+response.message+"</h4>"
					+"<h4>Your User Id is "+response.generatedId+"</h4>");
				
				//Clearing the field in the form after successful registration. 
				$("#ufname").val("");
				 $("#ulname").val("");
				 $("#uemail").val("");
				 $("#ucontact").val("");
				 $("#upswd").val("");
				 $("#udate").val("");	 
			}
			
		})
	})
})
</script>
</head>
<body>
<form id="userRegistrationFrm">
<div class="regwindow">

<div class="regtitle"> Create Account </div>

<label for="uname">First name </label>
	<input type="text" name="uname" id="ufname"  placeholder="Enter your name" minlength="3" required/>

<label for="uname">Last name </label>
	<input type="text" name="uname" id="ulname"/>

<label for="ucontact">Mobile number</label><br/>
	<select name="countrycode" id="options" >
		<option> India +91 </option>
		<option> US +1 </option>
		<option> UK +44 </option>
		<option> UAE +971 </option>
	</select>
	<input type="number" name="ucontact" id="ucontact" placeholder="1234567890" maxlenght="10" required/>

<label for="uname">Date Of Birth</label>
<br/>
	<input type="Date" name="udate" id="udate" /><br/>

<label for="uemail">Email Id</label>
	<input type="email" name="uemail" id="uemail" placeholder="joe@company.com" required/>

<label for="upswd">Password</label>
	<input type="password"  name="upswd" id="upswd" minlength="6" maxlength="14" required/>
	<p class="pswcap">i Passwords must be at least 6 characters.</p>
	

<input type="submit" class="regsubmit" value="Register"/>

<p class="info">Already have an account? 
<a href="loginpage.html">Sign in</a> </p>
</form>
<div id="divReg"></div>
</div>
</body>
</html>